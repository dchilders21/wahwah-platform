<div ng-if="$ctrl.isTestingCredentials">
    <div style="position: absolute; z-index: 1000; margin-left: -30px; top: 0px; left: 0px; min-width: 100vmax; height: 100vmax; background-color: rgba(30,30,50,0.3);"></div>
    <div style="position: absolute; z-index: 1001; top: 0px; left: 0px; min-width: 100%; height: 100vh; background-color: transparent">
        <div style="position: absolute; z-index: 1002; left: 50%; top: 50%; margin-left: -35px; margin-top: -40px;">
            <i class="fa fa-4x fa-spinner fa-spin"></i>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-12">
        <ul class="breadcrumb no-margin no-padding text-asbestos">
            <li><h3 class="page-header-nomargin text-asbestos"><a href="#/demand-sources">Demand Sources</a></h3></li>
            <li><h3 class="page-header-nomargin text-asbestos">Edit</h3></li>
        </ul>
    </div>
</div>


<br />


<div class="row">
    <div class="col-lg-12">
        <div class="alert alert-success" ng-if="$ctrl.showSaveSuccess"><strong>Demand Source Connection Saved</strong> The demand source connection has been updated</div>
        <div class="alert alert-danger" ng-if="$ctrl.showSaveError"><strong>Error</strong> {{$ctrl.errorMsg}}</div>
    </div>
</div>


<ng-tabs tabs="$ctrl.tabs" selected-tab="$ctrl.currentTab" tab-label="name" tab-select="$ctrl.setCurrentTab(tab)"></ng-tabs>

<div class="tab-content">
    <div id="demand-source-info" class="tab-pane fade" ng-class="{active: $ctrl.currentTab.id == 'demand-source-info',in: $ctrl.currentTab.id == 'demand-source-info'}">
        <demand-source-edit-info-panel demand-source="$ctrl.demandSource" demand-global-vars="$ctrl.demandGlobalVars" demand-source-connections="$ctrl.demandSourceConnections"></demand-source-edit-info-panel>
    </div>

    <div id="demand-source-line-item" class="tab-pane fade" ng-class="{active: $ctrl.currentTab.id == 'demand-source-line-item',in: $ctrl.currentTab.id == 'demand-source-line-item'}">
        <demand-source-edit-line-items-panel demand-source="$ctrl.demandSource" demand-global-vars="$ctrl.demandGlobalVars" demand-source-creatives="$ctrl.creatives" demand-source-line-items="$ctrl.demandSourceLineItems"></demand-source-edit-line-items-panel>
    </div>

    <div id="creative" class="tab-pane fade" ng-class="{active: $ctrl.currentTab.id == 'demand-source-creative',in: $ctrl.currentTab.id == 'demand-source-creative'}">
        <demand-source-edit-creative-panel creatives="$ctrl.creatives" line-items="$ctrl.demandSourceLineItems"></demand-source-edit-creative-panel>
    </div>

    <div id="demand-source-placement" class="tab-pane fade" ng-class="{active: $ctrl.currentTab.id == 'demand-source-placements',in: $ctrl.currentTab.id == 'demand-source-placements'}">
        <demand-source-placement-panel placements="$ctrl.placements" account="$ctrl.account"></demand-source-placement-panel>
    </div>

    <div class="row" ng-if="!$ctrl.isCreating && !$ctrl.demandSource.is_locked">
        <div class="col-lg-12">
            <form role="form" class="form">
                <div class="form-group">
                    <button type="button" class="btn btn-primary pull-right" ng-click="$ctrl.save()">Save</button>
                </div>
            </form>
        </div>
    </div>
</div>